---
import CardList, { LinkProps } from "./CardList.astro";
import hexRgb from "hex-rgb";

export interface Props {
  title: string;
  description?: string;
  color?: string;
  links?: Array<LinkProps>;
  showHeader?: boolean;
}

const { title, description, links, color, showHeader } = Astro.props;

const colorArray = color && hexRgb(color);
const customAccentColor =
  colorArray && `${colorArray.red}, ${colorArray.green}, ${colorArray.blue}`;
---

<article class="link-section">
  <header class={showHeader ? "" : "visually-hidden"}>
    <h2>{title}</h2>
    {description && <p>{description}</p>}
  </header>
  {links && links.length > 0 && <CardList links={links} />}
</article>

<style is:global define:vars={{ customAccentColor }}>
  .link-section {
    /* --accentColor: var(--customAccentColor); */
  }
</style>
<style define:vars={{ customAccentColor }}>
  .link-section {
    display: flex;
    flex-direction: column;
    padding: 1rem 0.15rem;
    transition: 0.5s ease-in-out all;
  }
  h2 {
    margin: 0;
    font-size: 1rem;
    transition: color 0.6s cubic-bezier(0.22, 1, 0.36, 1);
    text-transform: uppercase;
  }
  p {
    color: var(--textColor);
    font-size: 0.8rem;
    margin-top: 0.5rem;
    margin-bottom: 0;
  }
</style>
